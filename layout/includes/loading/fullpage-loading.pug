if theme.preloader.enable
  case theme.preloader.load_style    
    when 'gear'
      include ./load_style/gear.pug
    when 'wizard'
      include ./load_style/wizard.pug
    when 'cat'
      include ./load_style/cat.pug
    when 'pokeball'
      include ./load_style/pokeball.pug
    when 'image'
      include ./load_style/image.pug
    default
      include ./load_style/default.pug

script.
  (()=>{
    const $loadingBox = document.getElementById('loading-box')
    const $loadImage = document.querySelector('.load-image');
    const $body = document.body
    const preloader = {
      endLoading: () => {
        $body.style.overflow = ''
        // if theme.preloader.load_style is image
        $loadImage.classList.remove('blink');
        $loadImage.classList.add('fadeOut');
        $loadingBox.classList.add('fadeOut');
        $loadImage.addEventListener('animationend', () => {
          $loadingBox.classList.add('loaded')
        }); 
        // TODO: else $loadingBox.classList.add('loaded')
      },
      initLoading: () => {
        $body.style.overflow = 'hidden'
        $loadingBox.classList.remove('loaded')
        $loadingBox.classList.remove('fadeOut');
        $loadImage.classList.add('blink')
      }
    }

    preloader.initLoading()
    window.addEventListener('load',() => { preloader.endLoading() })

    if (!{theme.pjax && theme.pjax.enable}) {
      document.addEventListener('pjax:send', () => { preloader.initLoading() })
      document.addEventListener('pjax:complete', () => { preloader.endLoading() })
    }
  })()